# Flood Control в Golang

Этот проект представляет собой реализацию механизма контроля флуда на языке программирования Go. Флуд-контроль используется для предотвращения избыточного количества запросов от одного и того же пользователя за короткий промежуток времени.

## Как это работает?
Мы создали структуру `floodControl`, которая хранит информацию о вызовах метода `Check` для каждого пользователя. При каждом вызове метода `Check` проверяется, прошло ли достаточно времени с последнего вызова для этого пользователя. Если прошло, мы обновляем счетчик вызовов и время последнего вызова. Если вызов произошел в пределах установленного периода времени, мы увеличиваем счетчик вызовов. Если количество вызовов превысило заданный предел, метод возвращает `false`.

## Как использовать?

1. Создайте новый экземпляр `floodControl` с указанием периода времени (N) и максимального количества вызовов в этом периоде (K):
```go
fc := NewFloodControl(N, K)
```

2. При необходимости, вы можете изменить параметры N и K с помощью метода SetConfig:
```go
fc.SetConfig(newN, newK)
```

3. Для каждого вызова метода Check передайте userID пользователя:
```go
ok, err := fc.Check(context.Background(), userID)
if err != nil {
    // Обработка ошибки
}
if ok {
    // Обработка успешного прохождения флуд-контроля
} else {
    // Обработка превышения лимита флуд-контроля
}
```

## Почему именно такая реализация?
Map для хранения данных: Мы используем `map[int64]int64` для хранения информации о вызовах метода `Check` для каждого пользователя, так как это позволяет нам быстро находить и обновлять счетчики вызовов для каждого пользователя.

Защита от гонок данных: Мы используем `sync.Mutex` для безопасного доступа к map из нескольких горутин. Это предотвращает возможные гонки данных при одновременном доступе к структуре `floodControl` из нескольких мест в коде.

Параметры конфигурации: Мы добавили возможность изменять параметры N и K с помощью метода `SetConfig`, чтобы разработчики могли легко настраивать флуд-контроль в соответствии с требованиями своего приложения.

## Тестирование
Мы также предоставили набор тестов для проверки корректности работы нашей реализации флуд-контроля. Вы можете запустить их, выполнив следующую команду:
```bash
go test
```